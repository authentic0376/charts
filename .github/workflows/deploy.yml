# .github/workflows/deploy.yml
name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main # main ë¸Œëœì¹˜ì— í‘¸ì‹œë  ë•Œ ì‹¤í–‰ (master ë¸Œëœì¹˜ ì‚¬ìš© ì‹œ masterë¡œ ë³€ê²½)
  workflow_dispatch: # ìˆ˜ë™ ì‹¤í–‰ ë²„íŠ¼ ì¶”ê°€

# ì‘ì—…(Job) ì„¤ì •
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest # ì‹¤í–‰ í™˜ê²½
    permissions:
      contents: write # gh-pages ë¸Œëœì¹˜ì— ì“°ê¸° ê¶Œí•œ í•„ìš”

    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v4 # ì½”ë“œ ì²´í¬ì•„ì›ƒ

      - name: Set up Node.js âš™ï¸
        uses: actions/setup-node@v4 # Node.js í™˜ê²½ ì„¤ì •
        with:
          node-version: '18' # ì‚¬ìš©í•˜ëŠ” Node.js ë²„ì „ ëª…ì‹œ (í”„ë¡œì íŠ¸ì— ë§ê²Œ)
          cache: 'npm' # npm ìºì‹œ ì‚¬ìš© (yarn ì‚¬ìš© ì‹œ 'yarn')

      - name: Install dependencies ğŸ“¦
        run: npm ci # npm ci ì‚¬ìš© (npm installë³´ë‹¤ ë¹ ë¥´ê³  ì•ˆì •ì ), yarn ì‚¬ìš© ì‹œ yarn install --frozen-lockfile

      - name: Build ğŸ”¨
        run: npm run build # ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ (package.jsonì— ì •ì˜ëœ ëŒ€ë¡œ)

      - name: Deploy to GitHub Pages ğŸš€
        uses: peaceiris/actions-gh-pages@v3 # ë°°í¬ ì•¡ì…˜ ì‚¬ìš©
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }} # GitHub í† í° (ìë™ ì œê³µë¨)
          publish_dir: ./dist # ë°°í¬í•  í´ë” ì§€ì • (Vite ë¹Œë“œ ê²°ê³¼ í´ë”)
          # publish_branch: gh-pages # ë°°í¬ë  ë¸Œëœì¹˜ ì´ë¦„ (ê¸°ë³¸ê°’ gh-pages)
          # user_name: 'github-actions[bot]' # ì»¤ë°‹ ìœ ì € ì´ë¦„ (ì„ íƒ ì‚¬í•­)
          # user_email: 'github-actions[bot]@users.noreply.github.com' # ì»¤ë°‹ ìœ ì € ì´ë©”ì¼ (ì„ íƒ ì‚¬í•­)
          # cname: your-custom-domain.com # ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì‚¬ìš© ì‹œ (ì„ íƒ ì‚¬í•­)