var u=Object.defineProperty;var f=(r,s,a)=>s in r?u(r,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[s]=a;var n=(r,s,a)=>f(r,typeof s!="symbol"?s+"":s,a);import{p as I}from"./BtJWWB7g.js";import{S as m,a as A,A as T,b as E,T as c,c as X,d as k,e as N,f as g}from"./Dn8i_grF.js";import"./dktxTqiW.js";class v{constructor(){n(this,"p5Instance",null);n(this,"container",null);n(this,"width",m);n(this,"height",A);n(this,"xscl",0);n(this,"yscl",0);n(this,"axisY",0);n(this,"signalYOffset",0);n(this,"axisStartX",0);n(this,"axisEndX",0);n(this,"currentState",null)}async setup(s,a,x){this.container=s,this.width=a,this.height=x,this.updateScaling();const S=t=>{const d=()=>{t.push(),t.stroke(200),t.strokeWeight(1),t.fill(200),t.textSize(15),t.line(this.axisStartX,this.axisY,this.axisEndX,this.axisY),t.triangle(this.axisEndX-8,this.axisY-4,this.axisEndX+2,this.axisY,this.axisEndX-8,this.axisY+4),t.noStroke(),t.textAlign(t.LEFT,t.CENTER),t.text("t",this.axisEndX+5,this.axisY),t.stroke(200),t.textAlign(t.CENTER,t.TOP);const e=c/(g-1);for(let o=0;o<g;o++){const i=o*e,h=this.axisStartX+i*this.xscl;t.line(h,this.axisY-5,h,this.axisY+5),t.noStroke(),t.text(Number.isInteger(i)?i.toString():i.toFixed(1),h,this.axisY+8),t.stroke(200)}t.noStroke(),t.fill(150),t.textSize(12),t.textAlign(t.RIGHT,t.BOTTOM),t.text("(c) 공돌이의 수학정리노트",t.width-10,t.height-10),t.pop()};t.setup=()=>{if(!this.container)return;t.createCanvas(this.width,this.height).parent(this.container),t.describe("Interactive Shannon Sampling Theorem visualization showing original signal, sampled points, and reconstructed signal based on sampling frequency controlled by mouse position."),t.noLoop()},t.draw=()=>{const e=this.currentState;if(!e)return;t.background(0),d();const o=this.height*.05;t.fill(255),t.noStroke(),t.textAlign(t.CENTER,t.TOP),t.textSize(15),t.text("Place mouse cursor here and move left/right to change Sampling Frequency (fs)",this.width/2,o),t.textAlign(t.LEFT,t.TOP),t.textSize(14),t.text(`Sampling Frequency (fs): ${t.nf(e.samplingFrequency,1,2)} Hz`,10,10),t.text(`Nyquist Frequency: ${t.nf(e.nyquistFrequency,1,2)} Hz`,10,30),e.isAliasing&&(t.fill(255,100,100),t.text("Aliasing occurs! (fs < Nyquist)",10,50)),t.push(),t.translate(this.axisStartX,this.signalYOffset),t.scale(1,-1),t.noFill(),t.stroke(255,255,0),t.strokeWeight(1.5),t.beginShape();for(let i=0;i<e.timeVector.length;i++)t.vertex(e.timeVector[i]*this.xscl,e.originalSignal[i]*this.yscl);t.endShape(),t.stroke(100),t.strokeWeight(1),t.fill(200,50,50);for(let i=0;i<e.sampledTimePoints.length;i++){const h=e.sampledTimePoints[i]*this.xscl,l=e.sampledValues[i]*this.yscl;t.line(h,0,h,l),t.noStroke(),t.ellipse(h,l,8),t.stroke(100)}t.stroke(100,100,255),t.strokeWeight(2),t.noFill(),t.beginShape();for(let i=0;i<e.timeVector.length;i++)isFinite(e.reconstructedSignal[i])?t.vertex(e.timeVector[i]*this.xscl,e.reconstructedSignal[i]*this.yscl):t.drawingContext instanceof CanvasRenderingContext2D&&(t.endShape(),t.beginShape());t.endShape(),t.pop()}};this.p5Instance=new I(S)}draw(s){this.p5Instance&&((s.canvasWidth!==this.width||s.canvasHeight!==this.height)&&this.resize(s.canvasWidth,s.canvasHeight),this.currentState=s,this.p5Instance.redraw())}destroy(){this.p5Instance&&(this.p5Instance.remove(),this.p5Instance=null,console.log("P5ShannonRenderer destroyed.")),this.container=null,this.currentState=null}updateScaling(){this.axisStartX=T,this.axisEndX=this.width-E;const s=this.axisEndX-this.axisStartX;this.xscl=s/c,this.yscl=this.height*X,this.axisY=this.height*k,this.signalYOffset=this.height*N}resize(s,a){this.p5Instance&&(this.width=s,this.height=a,this.p5Instance.resizeCanvas(this.width,this.height),this.updateScaling())}}export{v as P5ShannonRenderer};
